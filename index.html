<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function getComputerChoice(){
            let randNum = (Math.floor(Math.random()*3));
            let choice;
            if (randNum === 0){
                choice = 'Rock';
            } else if (randNum === 1){
                choice = 'Paper';
            } else {
                choice = 'Scissors';
            }
            return choice;
        }

        function playRound(){
            const comp = getComputerChoice();
            const player = (prompt('What would you like to play?')).toLowerCase();
            if (player !== 'rock' && player !== 'paper' && player !== 'scissors') {
                console.log('Please reload the page and type in rock, paper, or scissors.')
                return;
            } else if (player === 'rock' && comp === 'Rock'){
                return 'You tied! Try again.';
            } else if (player === 'rock' && comp === 'Paper'){
                return 'You lost! Paper beats rock.';
            } else if (player === 'rock' && comp === 'Scissors'){
                return 'You won! Rock beats scissors.';
            } else if (player === 'paper' && comp === 'Rock'){
                return 'You won! Paper beats rock.';
            } else if (player === 'paper' && comp === 'Paper'){
                return 'You tied! Try again.';
            } else if (player === 'paper' && comp === 'Scissors'){
                return 'You lost! Scissors beats paper.';
            } else if (player === 'scissors' && comp === 'Rock'){
                return 'You lost! Rock beats scissors.';
            } else if (player === 'scissors' && comp === 'Paper'){
                return 'You won! Scissors beats paper.';
            } else if (player === 'scissors' && comp === 'Scissors'){
                return 'You tied! Try again.';
            } else {
                console.log('Again, please reload the page and use an appropriate word.');
                return;
            }
        }

        let winCount = 0;
        let loseCount = 0;

        function tie(){
            let tieResult = playRound();
            let tieArr = tieResult.split(" ");
            if (tieArr[1]=='tied!'){
                tie();
            } else if (tieArr[1]=='lost!'){
                loseCount+=1;
            } else {
                winCount+=1;
            }
        }

        function game(){
            for (let i = 0; i < 5; i++){
                let result = playRound();
                console.log(result)
                if (result == undefined){
                    return;
                }
                let arrResult = result.split(" ");
                if (arrResult[1] == 'lost!'){
                    loseCount+=1;
                } else if (arrResult[1] == 'won!'){
                    winCount+=1;
                } else if (arrResult[1] == 'tied!'){
                    tie();
                }
            }   
            if (winCount >= 3){
                console.log('Congratulations, you beat the computer!')
            } else if (loseCount >= 3){
                console.log('Sorry, the computer got the best of you...')
            } else {
                console.log('uh oh');
            }
        }
    </script>
</body>
</html>